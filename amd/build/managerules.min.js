function _typeof(a){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}define ("gradereport_calcsetup/managerules",["exports","core/ajax","core/modal_factory","core/modal_events","core/str"],function(a,b,c,d,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.init=void 0;b=g(b);c=g(c);d=g(d);e=g(e);function f(){if("function"!=typeof WeakMap)return null;var a=new WeakMap;f=function(){return a};return a}function g(a){if(a&&a.__esModule){return a}if(null===a||"object"!==_typeof(a)&&"function"!=typeof a){return{default:a}}var b=f();if(b&&b.has(a)){return b.get(a)}var c={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var e in a){if(Object.prototype.hasOwnProperty.call(a,e)){var g=d?Object.getOwnPropertyDescriptor(a,e):null;if(g&&(g.get||g.set)){Object.defineProperty(c,e,g)}else{c[e]=a[e]}}}c.default=a;if(b){b.set(a,c)}return c}a.init=function init(){document.getElementById("rulestable").addEventListener("click",h)};var h=function(a){var b=a.target;if("I"===b.nodeName){b=b.parentElement}else if("A"!==b.nodeName){return}var c=b.getAttribute("class");if(c.includes("showhide")){i(b)}else if(c.includes("delete")){j(b)}else{return}a.preventDefault()},i=function(a){var c=a.dataset.ruleid||0,d=a.dataset.action,f=e.get_strings([{key:"hide"},{key:"show"}]);f.done(function(e){b.call([{methodname:"gradereport_calcsetup_hiderule",args:{id:c,action:d},done:function done(b){if(!1===b.success){return}if(1==d){var c=e[0];a.innerHTML="<i class='icon fa fa-eye fa-fw' title='"+c+"' aria-label='"+c+"'></i>";a.dataset.action=0}else{var f=e[1];a.innerHTML="<i class='icon fa fa-eye-slash fa-fw' title='"+f+"' aria-label='"+f+"'></i>";a.dataset.action=1}}}])})},j=function(a){var f=a.dataset.ruleid||0;return c.create({type:c.types.SAVE_CANCEL,body:e.get_string("deleterulereally","gradereport_calcsetup"),title:e.get_string("deleterule","gradereport_calcsetup"),removeOnClose:!0,buttons:{save:e.get_string("yes"),cancel:e.get_string("no")}}).then(function(c){c.getRoot().on(d.save,function(){b.call([{methodname:"gradereport_calcsetup_deleterule",args:{id:f},done:function done(b){if(!1===b.success){return!1}var c=a.parentNode.parentNode;c.remove();return!0}}])});c.show();return!0})}});
//# sourceMappingURL=managerules.min.js.map
